<html>
  <head>
    <title>Home</title>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.1/jquery.min.js"></script>
    <link rel="stylesheet" href="/css/slimmenu.min.css" type="text/css">
    <!-- Add ethers.js library - simpler, more reliable CDN without integrity checks -->
    <script src="https://cdn.jsdelivr.net/npm/ethers@5.7.2/dist/ethers.umd.min.js" 
            type="text/javascript"></script>

    <style>
      * {
        box-sizing: border-box;
      }

      /* Style the body */
      body {
        font-family: Arial;
        margin: 0;
      }

      /* Header/logo Title */
      .header {
        padding: 60px;
        text-align: center;
        background: #1abc9c;
        color: white;
      }

      /* Style the top navigation bar */
      .slimmenu {
        display: flex;
        background-color: #333;
      }

      /* Style the navigation bar links */
      .slimmenu a {
        color: white;
        padding: 14px 20px;
        text-decoration: none;
        text-align: center;
      }

      /* Change color on hover */
      .slimmenu a:hover {
        background-color: #ddd;
        color: black;
      }

      .slimmenu a:active {
        background-color: #ddd;
        color: black;
      }

      /* Grid layout for homepage */
      .grid-container {
        display: grid;
        grid-template-columns: 1fr 1fr;
        grid-template-rows: auto auto;
        gap: 20px;
        padding: 20px;
      }

      .grid-item {
        background-color: #f1f1f1;
        padding: 20px;
        border-radius: 5px;
      }

      /* Fake image, just for this example */
      .fakeimg {
        background-color: #aaa;
        width: 100%;
        padding: 20px;
      }

      /* Footer */
      .footer {
        padding: 20px;
        text-align: center;
        background: #ddd;
      }

      /* Responsive layout - when the screen is less than 700px wide, make the grid items stack vertically */
      @media screen and (max-width: 700px) {
        .slimmenu {
          flex-direction: column;
        }
        .grid-container {
          grid-template-columns: 1fr;
        }
      }

      /* MetaMask Login Styles */
      .wallet-connect {
        position: absolute;
        top: 10px;
        right: 20px;
        z-index: 100;
      }
      
      .connect-button {
        background-color: #F6851B;
        color: white;
        border: none;
        padding: 10px 15px;
        border-radius: 5px;
        cursor: pointer;
        font-weight: bold;
        display: flex;
        align-items: center;
        gap: 8px;
      }
      
      .connect-button:hover {
        background-color: #E2761B;
      }
      
      .wallet-info {
        background-color: rgba(255, 255, 255, 0.9);
        padding: 10px;
        border-radius: 5px;
        margin-top: 5px;
        border: 1px solid #ddd;
        display: none;
      }

      .wallet-address {
        font-size: 14px;
        word-break: break-all;
      }
    </style>
  </head>

  <body>
    <!-- MetaMask Login -->
    <div class="wallet-connect">
      <button id="connectWallet" class="connect-button">
        <img src="https://metamask.io/images/metamask-fox.svg" width="20" height="20" alt="MetaMask">
        Connect Wallet
      </button>
      <div id="walletInfo" class="wallet-info">
        <div>Status: <span id="connectionStatus">Disconnected</span></div>
        <div>Address: <span id="walletAddress" class="wallet-address">Not connected</span></div>
      </div>
    </div>

    <!-- Note -->
    <div style="background:yellow;padding:5px">
      <h4 style="text-align:center">
        Resize the browser window to see the responsive effect.
      </h4>
    </div>

    <!-- Header -->
    <div class="header">
      <h1>My Website</h1>
      <p>With a <b>flexible</b> layout.</p>
    </div>

    <!-- Navigation Bar -->
    <ul id="navigation" class="slimmenu" >
      <a href="/index.html">Home</a> 
      <a href="/about-us.html">About Us</a> 
      <a href="/shop.html">Shop</a>
      <a href="/blog.html">Blog</a> 
      <a href="/calendar.html">Calendar</a>
    </ul>

    <!-- The grid layout -->
    <div class="grid-container">
      <div class="grid-item">
        <h2>Rectangle 1</h2>
        <div class="fakeimg" style="height:200px;">Image</div>
        <p>
          Some text about this rectangle. This will be the first item in your 2x2 grid layout.
          On mobile devices, this will stack vertically.
        </p>
      </div>
      <div class="grid-item">
        <h2>Rectangle 2</h2>
        <div class="fakeimg" style="height:200px;">Image</div>
        <p>
          Some text about the second rectangle. This will appear to the right of Rectangle 1
          on desktop and below Rectangle 1 on mobile.
        </p>
      </div>
      <div class="grid-item">
        <h2>Rectangle 3</h2>
        <div class="fakeimg" style="height:200px;">Image</div>
        <p>
          Some text about the third rectangle. This will appear below Rectangle 1 on desktop
          and below Rectangle 2 on mobile.
        </p>
      </div>
      <div class="grid-item">
        <h2>Rectangle 4</h2>
        <div class="fakeimg" style="height:200px;">Image</div>
        <p>
          Some text about the fourth rectangle. This will appear below Rectangle 2 on desktop
          and below Rectangle 3 on mobile.
        </p>
      </div>
    </div>

    <!-- jQuery -->
    <script src="https://ajax.aspnetcdn.com/ajax/jQuery/jquery-3.4.1.min.js"></script>

    <!-- Menu -->
    <script src="/js/jquery.slimmenu.min.js""></script>
    <script>
      $('#navigation').slimmenu(
          {
              resizeWidth: '800',
              collapserTitle: 'Main Menu',
              animSpeed: 'medium',
              easingEffect: null,
              indentChildren: false,
              childrenIndenter: '&nbsp;'
          }
        );
    </script>

    <!-- Add script to verify ethers is loaded before loading the metamask auth -->
    <script>
      // Check if ethers loaded correctly
      if (typeof ethers === 'undefined') {
        console.error("Ethers not loaded from CDN. Trying fallback...");
        // Try loading from another CDN as fallback
        var script = document.createElement('script');
        script.src = "https://unpkg.com/ethers@5.7.2/dist/ethers.umd.min.js";
        script.onload = function() {
          console.log("Ethers loaded from fallback CDN");
          // Now load the MetaMask integration
          var metamaskScript = document.createElement('script');
          metamaskScript.src = "/js/metamask-auth.js";
          document.body.appendChild(metamaskScript);
        };
        script.onerror = function() {
          console.error("Failed to load ethers from fallback CDN");
          document.getElementById('connectWallet').innerText = "Error: ethers not loaded";
          document.getElementById('connectWallet').disabled = true;
          document.getElementById('connectWallet').style.backgroundColor = '#ccc';
        };
        document.body.appendChild(script);
      } else {
        console.log("Ethers loaded successfully from primary CDN");
        // If ethers is loaded, then load the MetaMask integration
        var metamaskScript = document.createElement('script');
        metamaskScript.src = "/js/metamask-auth.js";
        document.body.appendChild(metamaskScript);
      }
    </script>

    <!-- Footer -->
    <div class="footer"><h2>Footer</h2></div>
  </body>
</html>
